{% extends "layout.html" %}

{% block head %}

<title>Viewings</title>
<script src="../static/Viewings.js"></script>

<script>
let viewings = JSON.parse('{{ viewings| tojson | safe }}');
</script>

{% endblock %}

{% block body %}

<h1 class="text-3xl sm:text-6xl my-6 text-center align-middle font-bold">Select Your Viewing</h1>

{% if viewings|length != 0 %}

<div class="flex flex-1 flex-col m-4 sm:m-8 gap-5">

    <div class="bg-base-300 rounded-box p-3 gap-5 flex justify-between">

       <select id="orderSelector" onchange="getSort()" class="select w-full max-w-xs rounded-box">
            <option value="earliest">Earliest first</option>
            <option value="latest">Latest First</option>
        </select>

        <label class="input flex items-center gap-2 w-full rounded-box max-w-xs">
            <input class="w-full" type="text" onfocusout="hideEnter()" onfocus="showEnter()" onchange="searchName()" id="searchBar" placeholder="Search" class="grow" />
            <kbd class="kbd kbd-sm unfocusedKbd hidden md:block">⌘</kbd>
            <kbd class="kbd kbd-sm unfocusedKbd hidden md:block">K</kbd>
            <kbd id='enter' class="kbd kbd-sm hidden">⏎</kbd>
        </label>   
    </div>

    <div id="viewingsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 min-[2000px]:grid-cols-5 gap-5">
        {% for viewing in viewings %}
            <div class="viewingCard card w-full bg-base-300 h-80" id="{{ viewing.viewingID }}">
                {% if viewing.Banner %}
                    <figure><img src="{{ viewing.Banner }}" alt="{{viewing.name}} banner" /></figure>
                {% else %}
                    <figure></figure>
                {% endif %}
                <div class="card-body gap-3 flex-wrap">

                    <h2 class="card-title text-xl font-bold flex-wrap">{{ viewing.Name }}</h2>
                    <span>
                    <div class="badge p-3 badge-neutral mx-1">{{viewing.Date}}</div>
                    <div class="badge p-3 badge-neutral mx-1">{{viewing.Time}}</div>
                    </span>
                    
                    <p>{{ viewing.Description }}</p>
                    <a href="/newBooking?id={{viewing.viewingID}}" class="btn btn-primary text-base-100 text-lg" name="Select">Select</a>
                </div>
            </div>
        {% endfor %}
        </div>
    {% else %}
    <div class= "flex flex-row p-4 gap-4 w-full items-center justify-center">
        <h2 class="text-4xl font-semibold">No viewings available </h2>
        <svg class="w-12" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--twemoji" preserveAspectRatio="xMidYMid meet" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18c-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"></path><path fill="#664500" d="M17.312 17.612a.501.501 0 0 0-.61-.014c-.012.009-1.26.902-3.702.902c-2.441 0-3.69-.893-3.7-.9a.5.5 0 0 0-.757.603c.06.135 1.5 3.297 4.457 3.297c2.958 0 4.397-3.162 4.457-3.297a.498.498 0 0 0-.145-.591zm10 0a.5.5 0 0 0-.61-.014c-.012.009-1.261.902-3.702.902c-2.44 0-3.69-.893-3.7-.9a.5.5 0 0 0-.757.603c.06.135 1.5 3.297 4.457 3.297c2.958 0 4.397-3.162 4.457-3.297a.498.498 0 0 0-.145-.591zM22 28h-8a1 1 0 1 1 0-2h8a1 1 0 1 1 0 2zM6 14a1 1 0 0 1-.004-2c.156-.002 3.569-.086 6.205-3.6a1 1 0 0 1 1.6 1.2C10.538 13.95 6.184 14 6 14zm24 0c-.184 0-4.537-.05-7.8-4.4a1 1 0 1 1 1.599-1.2c2.641 3.521 6.061 3.599 6.206 3.6c.55.006.994.456.991 1.005A.996.996 0 0 1 30 14z"></path></g></svg>
    </div>  
</div>
{% endif %}



{% endblock %}

